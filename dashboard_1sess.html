
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>First-Session Personalization Sprint — Project Dashboard (Pro)</title>
  <style>
    :root{
      --bg:#0b0c10; --panel:#121317; --card:#171922; --fg:#eef2f7; --muted:#a7b0c0; --accent:#6ee7b7; --accent2:#60a5fa; --warn:#f59e0b; --danger:#f87171; --ok:#34d399; --border:#232638;
      --radius:18px; --radius-sm:12px; --shadow:0 10px 35px rgba(0,0,0,.35);
      --mx:24px;
    }
    *{box-sizing:border-box}
    body{margin:0; background:radial-gradient(1200px 700px at 20% -10%, rgba(96,165,250,.15), transparent 60%),
                    radial-gradient(1000px 600px at 110% 10%, rgba(110,231,183,.12), transparent 60%),
                    var(--bg);
         color:var(--fg); font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;}
    a{color:var(--accent2); text-decoration:none}
    .wrap{max-width:1220px; margin:36px auto 90px; padding:0 var(--mx)}
    .header{display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:24px}
    .title{font-size:28px; font-weight:800; letter-spacing:.2px}
    .subtitle{color:var(--muted)}
    .chip{display:inline-flex; align-items:center; gap:8px; padding:6px 12px; border-radius:999px; background:linear-gradient(135deg, rgba(96,165,250,.16), rgba(110,231,183,.16)); border:1px solid var(--border); font-weight:600; font-size:13px}
    .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px}
    .card h3{margin:2px 0 12px; font-size:16px; letter-spacing:.3px}
    .kv{display:grid; grid-template-columns:180px 1fr; gap:10px; margin:8px 0}
    .kv div:first-child{color:var(--muted)}
    .tag{display:inline-block; padding:2px 8px; background:#0f1220; border:1px solid var(--border); border-radius:999px; color:#c6d0e5; font-size:12px; margin-right:6px}
    .metric{display:flex; align-items:center; justify-content:space-between; margin:10px 0}
    .bar{position:relative; background:#0f1220; border:1px solid var(--border); border-radius:10px; height:12px; overflow:hidden; flex:1; margin-left:12px}
    .bar > span{position:absolute; inset:0 0 0 0; width:var(--w); background:linear-gradient(90deg, var(--accent), var(--accent2));}
    .pill{font-weight:700; font-size:22px}
    .muted{color:var(--muted)}
    .kpi{display:flex; gap:16px; flex-wrap:wrap}
    .kpi .k{flex:1; min-width:210px; background:linear-gradient(180deg, rgba(110,231,183,.08), rgba(96,165,250,.08)); border:1px solid var(--border); padding:16px; border-radius:14px}
    .small{font-size:12px; color:var(--muted)}
    .table{width:100%; border-collapse:collapse; overflow:hidden; border-radius:12px; border:1px solid var(--border)}
    .table th,.table td{padding:10px 12px; border-bottom:1px solid var(--border); text-align:left; vertical-align:top}
    .table thead th{font-size:12px; color:#b9c4d9; background:#0f1220; position:sticky; top:0}
    .sql{background:#0f1220; border:1px solid var(--border); border-radius:12px; padding:14px; overflow:auto; font:13px/1.35 ui-monospace,SFMono-Regular,Menlo,monospace}
    .section-title{font-size:14px; letter-spacing:1px; text-transform:uppercase; color:#b9c4d9; margin:4px 0 8px}
    .legend{display:flex; gap:10px; align-items:center; font-size:12px; color:#cdd6ea}
    .legend span{display:inline-block; width:10px; height:10px; border-radius:3px; margin-right:6px}
    .lg1{background:var(--accent)}
    .lg2{background:var(--accent2)}
    .chart{background:#0f1220; border:1px solid var(--border); border-radius:12px; padding:10px}
    .foot{margin-top:28px; color:var(--muted); font-size:13px}
    .badge{display:inline-block; padding:2px 8px; border-radius:12px; border:1px solid var(--border); font-size:12px; background:#0f1220; color:#cdd6ea}
    .ok{color:var(--ok)} .warn{color:var(--warn)} .danger{color:var(--danger)}
    .list-compact li{margin:6px 0}
    .mono{font-family: ui-monospace,SFMono-Regular,Menlo,monospace;}
    @media (max-width: 900px){ .grid{grid-template-columns:repeat(6,1fr)} .kv{grid-template-columns:1fr} }
    @media (max-width: 640px){ .grid{grid-template-columns:repeat(2,1fr)} }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div>
        <div class="chip">First-Session Personalization Sprint</div>
        <div class="title">Project Dashboard (Pro)</div>
        <div class="subtitle">Micro-onboarding (“Pick 3 interests”) + personalized feed experiment · Sept–Oct 2024</div>
      </div>
      <div>
        <span class="tag">Product</span>
        <span class="tag">A/B Testing</span>
        <span class="tag">SQL</span>
        <span class="tag">Feature Flags</span>
      </div>
    </div>

    <div class="grid">
      <!-- Overview & Artifacts -->
      <div class="card" style="grid-column: span 7;">
        <div class="section-title">Overview</div>
        <div class="kv"><div>Owner</div><div><strong>Yuhee Lefkowitz</strong> (PM) · Design · Backend · Data</div></div>
        <div class="kv"><div>Goal</div><div>Lift first-session engagement & 7-day retention via interest-based personalization at onboarding.</div></div>
        <div class="kv"><div>Hypothesis</div><div>Picking 3+ interests yields a more relevant first feed → higher short- and mid-term retention.</div></div>
        <div class="kv"><div>Timeline</div><div>4 weeks · Sept 2024 → Oct 2024 (UTC) · Release Train <span class="badge">2024.10.R2</span></div></div>
      </div>

      <div class="card" style="grid-column: span 5;">
        <h3>Experiment Artifacts</h3>
        <table class="table">
          <tbody>
            <tr><td><strong>Experiment Key</strong></td><td><span class="mono">exp_onb_pick3_v1</span></td></tr>
            <tr><td><strong>Feature Flag</strong></td><td><span class="mono">onb.pick3.enabled</span> (Kill switch: <span class="ok">present</span>)</td></tr>
            <tr><td><strong>Ticket</strong></td><td><span class="mono">JIRA-ONB-241</span> — Micro-onboarding & feed seeding</td></tr>
            <tr><td><strong>PR / Commit</strong></td><td><span class="mono">PR#1284</span> — <span class="mono">6b91e3a</span> (server), <span class="mono">c21ad7f</span> (client)</td></tr>
            <tr><td><strong>Dashboards</strong></td><td>Metabase: <span class="mono">R7 Cohorts v1</span> · Datadog: <span class="mono">FE Latency p95</span></td></tr>
            <tr><td><strong>Assignment Unit</strong></td><td><span class="mono">user_id</span> · 50/50 split · Geo & platform stratified</td></tr>
            <tr><td><strong>Exclusions</strong></td><td>Returning users, employees, flagged-bot traffic, age &lt; 13</td></tr>
          </tbody>
        </table>
      </div>

      <!-- KPI snapshot -->
      <div class="card" style="grid-column: span 12;">
        <div class="section-title">KPI Snapshot</div>
        <div class="kpi">
          <div class="k">
            <div class="small">First-Session Engagement</div>
            <div class="pill">+9 pp</div>
            <div class="muted">Baseline 48% → 57% (B-A)</div>
            <div class="metric"><span class="muted">Target: +5 pp</span>
              <div class="bar" style="--w: 90%"><span></span></div>
            </div>
          </div>
          <div class="k">
            <div class="small">7-Day Retention</div>
            <div class="pill">+6 pp</div>
            <div class="muted">22% → 28% · 95% CI: [+3.4, +8.6] · p = 0.004</div>
            <div class="metric"><span class="muted">Power: 0.95</span>
              <div class="bar" style="--w: 100%"><span></span></div>
            </div>
          </div>
          <div class="k">
            <div class="small">Onboarding Completion</div>
            <div class="pill">82%</div>
            <div class="muted">Baseline 75% · +7 pp</div>
            <div class="metric"><span class="muted">Target: 80%</span>
              <div class="bar" style="--w: 82%"><span></span></div>
            </div>
          </div>
          <div class="k">
            <div class="small">Time-to-First-Like (median)</div>
            <div class="pill">2.4 min</div>
            <div class="muted">Baseline 2.8 (Δ −0.4)</div>
            <div class="metric"><span class="muted">Guardrail: &lt; 3.0</span>
              <div class="bar" style="--w: 80%"><span></span></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Statistical checks -->
      <div class="card" style="grid-column: span 7;">
        <h3>Statistical Checks</h3>
        <table class="table">
          <tbody>
            <tr><td><strong>SRM Check</strong></td><td>No SRM detected (χ² p = 0.41) — sample split within ±0.8%.</td></tr>
            <tr><td><strong>MDE (R7)</strong></td><td>3.0 pp at 95% power, α=0.05 — achieved lift +6.0 pp.</td></tr>
            <tr><td><strong>Method</strong></td><td>Difference-in-proportions with pooled SE; CUPED adjustment on baseline activity.</td></tr>
            <tr><td><strong>Stopping Rule</strong></td><td>Fixed horizon (14d) + sequential monitoring with alpha spending; no early stop.</td></tr>
          </tbody>
        </table>
        <div class="section-title">Variant Summary</div>
        <div class="sql"><pre>Control (A): n=5,015 · R7 = 22.2% · SE = 0.0059
Test (B):    n=5,032 · R7 = 28.1% · SE = 0.0063
Lift: +5.9 pp · z = 2.88 · p = 0.004</pre></div>
      </div>

      <!-- Reliability & Guardrails -->
      <div class="card" style="grid-column: span 5;">
        <h3>Reliability & Guardrails</h3>
        <table class="table">
          <tbody>
            <tr><td><strong>Crash Rate</strong></td><td>0.44% (A) vs 0.42% (B) — Δ −0.02 pp <span class="ok">OK</span></td></tr>
            <tr><td><strong>FE Latency p95</strong></td><td>+8 ms vs baseline · alert threshold 20 ms <span class="ok">OK</span></td></tr>
            <tr><td><strong>Spend / DAU</strong></td><td>No impact outside ±1% band <span class="ok">OK</span></td></tr>
            <tr><td><strong>Support Tickets</strong></td><td>No increase (12 → 11 / wk) <span class="ok">OK</span></td></tr>
            <tr><td><strong>Data Freshness SLO</strong></td><td>95th percentile ETL lag 11 min (SLO &lt; 15m) <span class="ok">OK</span></td></tr>
          </tbody>
        </table>
      </div>

      <!-- Segmentation -->
      <div class="card" style="grid-column: span 12;">
        <h3>Segment Deep Dive</h3>
        <table class="table">
          <thead><tr><th>Segment</th><th>Control</th><th>Test</th><th>Lift (pp)</th><th>Note</th></tr></thead>
          <tbody>
            <tr><td>iOS</td><td>R7 23.1%</td><td>30.3%</td><td><strong>+7.2</strong></td><td>Higher push opt-in rate</td></tr>
            <tr><td>Android</td><td>R7 21.5%</td><td>26.6%</td><td><strong>+5.1</strong></td><td>Personalized feed latency slightly higher</td></tr>
            <tr><td>Organic</td><td>R7 24.0%</td><td>33.8%</td><td><strong>+9.8</strong></td><td>Interests map well to content graph</td></tr>
            <tr><td>Paid UA</td><td>R7 18.2%</td><td>22.4%</td><td><strong>+4.2</strong></td><td>Lower initial intent</td></tr>
            <tr><td>US</td><td>R7 22.6%</td><td>29.5%</td><td><strong>+6.9</strong></td><td>Data coverage strongest</td></tr>
            <tr><td>Non‑US</td><td>R7 21.7%</td><td>27.0%</td><td><strong>+5.3</strong></td><td>Category catalog smaller</td></tr>
          </tbody>
        </table>
      </div>

      <!-- Funnel -->
      <div class="card" style="grid-column: span 12;">
        <h3>Onboarding Funnel</h3>
        <table class="table">
          <thead><tr><th>Step</th><th>Control (A)</th><th>Test (B)</th><th>Δ</th></tr></thead>
          <tbody>
            <tr><td>Onboarding Started</td><td>100%</td><td>100%</td><td>—</td></tr>
            <tr><td>Interests Picked (≥3)</td><td>—</td><td><strong>84%</strong></td><td>+84 pp</td></tr>
            <tr><td>Personalized Feed Viewed</td><td>—</td><td><strong>92%</strong> of pickers</td><td>—</td></tr>
            <tr><td>First Like</td><td>41%</td><td><strong>49%</strong></td><td>+8 pp</td></tr>
            <tr><td>Session 2 within 72h</td><td>33%</td><td><strong>39%</strong></td><td>+6 pp</td></tr>
            <tr><td>R7</td><td>22%</td><td><strong>28%</strong></td><td>+6 pp</td></tr>
          </tbody>
        </table>
      </div>

      <!-- Data Quality -->
      <div class="card" style="grid-column: span 7;">
        <h3>Data Quality Checks</h3>
        <ul class="list-compact">
          <li>Event coverage ≥ 99.2% for <span class="mono">onboarding_started</span>, <span class="mono">interests_selected</span>, <span class="mono">feed_viewed</span>, <span class="mono">first_like</span>, <span class="mono">retained_7d</span>.</li>
          <li>Late-arriving events &lt; 1.2% (handled with 24h watermark).</li>
          <li>AA-test pre-check (n=4,800) showed no metric drift (all p &gt; 0.3).</li>
          <li>Timezone normalization to UTC; device clock skew mitigated with server timestamps.</li>
          <li>Bot & fraud filters applied using rules engine v3.</li>
        </ul>
        <div class="section-title">Event Schema (excerpt)</div>
        <div class="sql"><pre>TABLE user_events (
  event_time_utc TIMESTAMP,
  user_id STRING,
  event_name STRING,             -- e.g., 'interests_selected'
  properties JSON,               -- { "count": 3, "ids": ["art","tech","travel"] }
  platform STRING,               -- 'ios' | 'android' | 'web'
  acquisition STRING,            -- 'organic' | 'paid'
  experiment_key STRING,         -- 'exp_onb_pick3_v1'
  variant STRING                 -- 'A' | 'B'
);</pre></div>
      </div>

      <!-- Rollout & Risk -->
      <div class="card" style="grid-column: span 5;">
        <h3>Rollout Checklist</h3>
        <ul class="list-compact">
          <li>Feature flag staged: 1% → 10% → 25% → 50% → 100% with health checks.</li>
          <li>Alerts: Datadog monitors for FE p95 latency, error rate, crash rate.</li>
          <li>Runbook & rollback: <span class="mono">onb.pick3.enabled=false</span> + revert PR#1284.</li>
          <li>Comms: release notes to CX, GTM playbook for UA creatives.</li>
          <li>Privacy: interests stored as IDs; no PII; retention policy 180d.</li>
        </ul>
        <h3>Risks & Mitigations</h3>
        <ul class="list-compact">
          <li>Cold-start misclassification → add default safe categories (mitigated).</li>
          <li>Long-tail content sparsity → backfill with trending items (mitigated).</li>
          <li>Latency spike on first session → prefetch top-N per interest (mitigated).</li>
        </ul>
      </div>

      <!-- Analysis SQL -->
      <div class="card" style="grid-column: span 12;">
        <h3>Analysis (SQL excerpts)</h3>
        <div class="sql"><pre>-- Variant-level retention summary (CUPED-adjusted)
WITH agg AS (
  SELECT variant,
         COUNT(DISTINCT user_id) AS users,
         AVG(CASE WHEN retained_7d THEN 1 ELSE 0 END) AS r7
  FROM experiment_sessions
  WHERE experiment_id = 'exp_onb_pick3_v1'
    AND signup_at BETWEEN '2024-09-29' AND '2024-10-12'
  GROUP BY 1
)
SELECT *
     , (MAX(r7) - MIN(r7)) * 100 AS lift_pp
FROM agg;

-- Segment lift by platform x acquisition
SELECT platform, acquisition,
       AVG(retained_7d) FILTER (WHERE variant='B') -
       AVG(retained_7d) FILTER (WHERE variant='A') AS lift
FROM experiment_sessions
GROUP BY 1,2
ORDER BY 3 DESC;</pre></div>
      </div>

      <!-- Next Steps -->
      <div class="card" style="grid-column: span 12;">
        <h3>Next Steps (Q4 2024 Roadmap)</h3>
        <ol class="list-compact">
          <li><strong>Smart Interest Expansion (ONB‑274)</strong> — suggest adjacent topics after day 3.</li>
          <li><strong>Feed Rebalance v2 (FEED‑198)</strong> — weight implicit signals & decay older interests.</li>
          <li><strong>Retention Cohorts Live (DATA‑311)</strong> — Metabase real-time R7/R30 with anomaly alerts.</li>
        </ol>
      </div>
    </div>

    <div class="foot">Built as a self-contained HTML dashboard — realistic artifacts, metrics, guardrails, and analysis details for portfolio or internal readouts.</div>
  </div>
</body>
</html>
