<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>First-Session Personalization Sprint — Case Study</title>
  <style>
    :root{
      --bg:#f5f7fb;
      --page:#ffffff;
      --fg:#111827;
      --muted:#6b7280;
      --accent:#2563eb;
      --accent-soft:#e0ecff;
      --accent-soft-2:#ecfdf3;
      --border:#e5e7eb;
      --border-strong:#cbd5f5;
      --headline:#0f172a;
      --radius:14px;
      --radius-sm:10px;
      --shadow:0 18px 45px rgba(15,23,42,0.08);
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
      margin:0;
      background:
        radial-gradient(800px 600px at -10% -10%, rgba(37,99,235,0.12), transparent 65%),
        radial-gradient(900px 700px at 110% 0%, rgba(16,185,129,0.12), transparent 70%),
        var(--bg);
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Inter,Arial,sans-serif;
      color:var(--fg);
      -webkit-font-smoothing:antialiased;
    }

    .page{
      max-width:980px;
      margin:40px auto 80px;
      padding:32px 28px 40px;
      background:var(--page);
      border-radius:22px;
      box-shadow:var(--shadow);
      border:1px solid rgba(148,163,184,0.20);
    }

    .header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:24px;
      border-bottom:1px solid var(--border);
      padding-bottom:18px;
      margin-bottom:24px;
    }

    .eyebrow{
      font-size:12px;
      font-weight:600;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:var(--accent);
      margin-bottom:6px;
    }

    h1{
      font-size:28px;
      line-height:1.15;
      color:var(--headline);
      margin-bottom:6px;
      font-weight:800;
    }

    .subtitle{
      font-size:14px;
      color:var(--muted);
      max-width:520px;
    }

    .meta{
      text-align:right;
      font-size:12px;
      color:var(--muted);
    }

    .tag-row{
      margin-top:8px;
    }

    .tag{
      display:inline-flex;
      align-items:center;
      padding:3px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      font-size:11px;
      color:#374151;
      background:#f9fafb;
      margin-left:4px;
    }

    .tag:first-child{margin-left:0;}

    .section{
      margin-bottom:28px;
      padding:18px 18px 16px;
      border-radius:var(--radius);
      border:1px solid var(--border);
      background:#f9fafb;
    }

    .section.emphasis{
      background:linear-gradient(135deg,#eef2ff 0%,#ecfeff 100%);
      border-color:var(--border-strong);
    }

    .section-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }

    .section-title{
      font-size:13px;
      letter-spacing:.15em;
      text-transform:uppercase;
      font-weight:700;
      color:#4b5563;
    }

    .section-subtitle{
      font-size:12px;
      color:var(--muted);
    }

    p{
      font-size:14px;
      line-height:1.55;
      margin-bottom:8px;
    }

    strong{font-weight:600;}

    ul,ol{
      margin-left:18px;
      font-size:14px;
      line-height:1.52;
    }
    li+li{margin-top:4px;}

    .cols-2{
      display:grid;
      grid-template-columns:1.1fr 1fr;
      gap:20px;
    }

    .cols-3{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:12px;
      margin-top:8px;
    }

    .pill-metric{
      background:var(--page);
      border-radius:var(--radius-sm);
      padding:10px 12px 10px;
      border:1px solid var(--border-strong);
    }

    .pill-label{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:#6b7280;
      margin-bottom:3px;
    }

    .pill-value{
      font-size:18px;
      font-weight:700;
      color:var(--headline);
      margin-bottom:2px;
    }

    .pill-caption{
      font-size:12px;
      color:var(--muted);
    }

    .badge{
      display:inline-flex;
      align-items:center;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid var(--border-strong);
      background:var(--accent-soft);
      color:#1d4ed8;
      font-size:11px;
      font-weight:600;
    }

    .kv{
      display:grid;
      grid-template-columns:120px 1fr;
      column-gap:10px;
      row-gap:4px;
      font-size:13px;
      margin-top:4px;
    }

    .kv-label{
      color:var(--muted);
      font-weight:500;
    }

    .inline-code{
      font-family:ui-monospace,SFMono-Regular,Menlo,monospace;
      font-size:12px;
      background:#11182708;
      padding:1px 5px;
      border-radius:6px;
      border:1px solid #e5e7eb;
    }

    .table{
      width:100%;
      border-collapse:collapse;
      margin-top:6px;
      font-size:13px;
    }

    .table th,
    .table td{
      padding:7px 8px;
      border-bottom:1px solid var(--border);
      vertical-align:top;
    }

    .table th{
      text-align:left;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.13em;
      color:#6b7280;
      background:#f3f4f6;
    }

    .callout{
      border-radius:var(--radius-sm);
      padding:10px 11px 9px;
      font-size:13px;
      background:var(--accent-soft-2);
      border:1px solid #bbf7d0;
      color:#166534;
      margin-top:8px;
    }

    .sql-block{
      margin-top:8px;
      padding:10px 12px;
      border-radius:var(--radius-sm);
      background:#020617;
      border:1px solid #1f2937;
      color:#e5e7eb;
      font-family:ui-monospace,SFMono-Regular,Menlo,monospace;
      font-size:12px;
      overflow-x:auto;
      line-height:1.45;
      white-space:pre;
    }

    .footnote{
      margin-top:8px;
      font-size:11px;
      color:var(--muted);
    }

    @media (max-width:840px){
      .header{flex-direction:column;align-items:flex-start;}
      .meta{text-align:left;}
      .cols-2{grid-template-columns:1fr;}
      .cols-3{grid-template-columns:1fr;gap:10px;}
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- Cover -->
    <header class="header">
      <div>
        <div class="eyebrow">Case Study</div>
        <h1>First-Session Personalization Sprint</h1>
        <p class="subtitle">
          Micro-onboarding “Pick 3 interests” flow plus personalized first feed for a social video app.
          Ran as a 4-week experiment (Sept–Oct 2024) to lift first-session engagement and 7-day retention.
        </p>
      </div>
      <div class="meta">
        <div><strong>Owner:</strong> Yuhee Lefkowitz (PM)</div>
        <div>With Design · Backend · Data</div>
        <div style="margin-top:6px;">Release train <span class="badge">2024.10.R2</span></div>
        <div class="tag-row">
          <span class="tag">Product</span>
          <span class="tag">A/B Testing</span>
          <span class="tag">SQL</span>
          <span class="tag">Feature Flags</span>
        </div>
      </div>
    </header>

    <!-- Executive summary -->
    <section class="section emphasis">
      <div class="section-header">
        <div class="section-title">Executive Summary</div>
        <div class="section-subtitle">What we did and why it matters</div>
      </div>
      <div class="cols-2">
        <div>
          <p><strong>Problem.</strong> New users were landing on a generic, unpersonalized feed, leading to weak
            first-session engagement and low 7-day retention (R7 22%).</p>
          <p><strong>Hypothesis.</strong> Asking users to pick ≥3 interests on first session, then seeding a personalized
            feed from those interests, would make the initial experience feel more relevant and increase early-life
            engagement and retention.</p>
          <p><strong>Approach.</strong> We shipped a micro-onboarding “Pick 3 interests” step, wired it into a new feed
            seeding algorithm, and ran a 50/50 A/B test on new users (user-level randomization, stratified by geo and platform).</p>
        </div>
        <div>
          <div class="cols-3">
            <div class="pill-metric">
              <div class="pill-label">First-Session Engagement</div>
              <div class="pill-value">+9 pp</div>
              <div class="pill-caption">48% → 57% vs. target +5 pp</div>
            </div>
            <div class="pill-metric">
              <div class="pill-label">7-Day Retention</div>
              <div class="pill-value">+6 pp</div>
              <div class="pill-caption">22% → 28% · p = 0.004 · 95% CI [+3.4, +8.6]</div>
            </div>
            <div class="pill-metric">
              <div class="pill-label">Onboarding Completion</div>
              <div class="pill-value">82%</div>
              <div class="pill-caption">Up 7 pp vs. 75% baseline · Guardrails all green</div>
            </div>
          </div>
          <div class="callout">
            The experiment beat both engagement and retention targets with no negative impact on
            reliability, latency or monetization guardrails. We recommended full rollout.
          </div>
        </div>
      </div>
    </section>

    <!-- Context & goals -->
    <section class="section">
      <div class="section-header">
        <div class="section-title">Context & Objectives</div>
        <div class="section-subtitle">Why this sprint existed</div>
      </div>
      <div class="kv">
        <div class="kv-label">Product Area</div>
        <div>Onboarding & first-session experience for a social video discussion app.</div>
        <div class="kv-label">Primary Goal</div>
        <div>Increase <strong>first-session engagement</strong> and <strong>7-day retention</strong> for new users by
          making the first feed immediately relevant.</div>
        <div class="kv-label">Secondary Goals</div>
        <div>
          <ul>
            <li>Improve <strong>onboarding completion</strong> without adding friction.</li>
            <li>Protect <strong>performance and reliability</strong> (latency, crash rate, support tickets).</li>
          </ul>
        </div>
        <div class="kv-label">Timeline</div>
        <div>4-week sprint · Sept → Oct 2024.</div>
      </div>
    </section>

    <!-- Solution design -->
    <section class="section">
      <div class="section-header">
        <div class="section-title">Solution Design</div>
        <div class="section-subtitle">What we built</div>
      </div>
      <div class="cols-2">
        <div>
          <p><strong>Micro-onboarding flow.</strong></p>
          <ul>
            <li>Inserted a “<strong>Pick 3 interests</strong>” screen into the onboarding funnel for new users.</li>
            <li>Required at least 3 interests; offered a curated taxonomy (e.g., art, tech, travel).</li>
            <li>Stored interests as non-PII IDs with a 180-day retention policy.</li>
          </ul>
          <p style="margin-top:8px;"><strong>Feed seeding.</strong></p>
          <ul>
            <li>Generated a personalized first feed by pulling top-N content per selected interest.</li>
            <li>Backfilled with trending items to mitigate long-tail content sparsity.</li>
            <li>Prefetched content to avoid first-session latency spikes.</li>
          </ul>
        </div>
        <div>
          <p><strong>Technical implementation.</strong></p>
          <ul>
            <li>Feature flag: <span class="inline-code">onb.pick3.enabled</span> (user-level).</li>
            <li>Experiment key: <span class="inline-code">exp_onb_pick3_v1</span> · assignment unit <span class="inline-code">user_id</span>.</li>
            <li>50/50 split · stratified by geo and platform (iOS / Android).</li>
            <li>Experiment artifacts:
              <ul style="margin-top:4px;">
                <li>Jira: <span class="inline-code">ONB-241</span> — micro-onboarding & feed seeding.</li>
                <li>PRs: <span class="inline-code">PR#1284</span>, commits <span class="inline-code">6b91e3a</span> (server) and <span class="inline-code">c21ad7f</span> (client).</li>
                <li>Dashboards: Metabase <span class="inline-code">R7 Cohorts v1</span>; Datadog <span class="inline-code">FE Latency p95</span>.</li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <div class="footnote">
        Exclusions: returning users, employees, flagged bot traffic, and users under 13.
      </div>
    </section>

    <!-- Experiment design & methodology -->
    <section class="section">
      <div class="section-header">
        <div class="section-title">Experiment Design & Methodology</div>
        <div class="section-subtitle">How we evaluated impact</div>
      </div>
      <div class="cols-2">
        <div>
          <p><strong>Design.</strong></p>
          <ul>
            <li>Randomized controlled experiment with <strong>fixed 14-day horizon</strong>.</li>
            <li>50/50 split at <span class="inline-code">user_id</span> level, stratified by platform & geo.</li>
            <li>Assignment and exposure logged via <span class="inline-code">experiment_sessions</span> table.</li>
          </ul>
          <p style="margin-top:8px;"><strong>Stats approach.</strong></p>
          <ul>
            <li>Difference-in-proportions with pooled standard error.</li>
            <li>CUPED adjustment using baseline activity to reduce variance.</li>
            <li>MDE for R7: <strong>3.0 pp</strong> at 95% power, α = 0.05.</li>
            <li>Stopping rule: fixed horizon + sequential monitoring with alpha spending;
              no early stop triggered.</li>
          </ul>
        </div>
        <div>
          <table class="table">
            <thead>
              <tr>
                <th>Check</th>
                <th>Outcome</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Sample Ratio Mismatch</strong></td>
                <td>No SRM detected · χ² p = 0.41 · split within ±0.8%.</td>
              </tr>
              <tr>
                <td><strong>Variant sizes</strong></td>
                <td>Control (A): n = 5,015 · Test (B): n = 5,032.</td>
              </tr>
              <tr>
                <td><strong>Primary metric</strong></td>
                <td>R7 (7-day retention) · lift +5.9 pp · z = 2.88 · p = 0.004.</td>
              </tr>
              <tr>
                <td><strong>Pre-AA test</strong></td>
                <td>AA test (n ≈ 4,800) showed no metric drift (all p &gt; 0.3).</td>
              </tr>
            </tbody>
          </table>
          <div class="sql-block">Control (A): n=5,015 · R7=22.2% · SE=0.0059
Test (B):    n=5,032 · R7=28.1% · SE=0.0063
Lift: +5.9 pp · z=2.88 · p=0.004</div>
        </div>
      </div>
    </section>

    <!-- Results & impact -->
    <section class="section">
      <div class="section-header">
        <div class="section-title">Results & Impact</div>
        <div class="section-subtitle">What changed for users</div>
      </div>

      <div class="cols-2">
        <div>
          <p><strong>Topline metrics.</strong></p>
          <ul>
            <li><strong>First-session engagement:</strong> +9 percentage points (48% → 57%), beating the +5 pp target.</li>
            <li><strong>7-day retention (R7):</strong> +6 percentage points (22% → 28%), statistically significant.</li>
            <li><strong>Onboarding completion:</strong> increased from 75% to 82% (+7 pp) despite the added step.</li>
            <li><strong>Time-to-first-like (median):</strong> improved from 2.8 to 2.4 minutes (−0.4).</li>
          </ul>

          <p style="margin-top:8px;"><strong>Guardrails.</strong></p>
          <ul>
            <li><strong>Crash rate:</strong> 0.44% (A) vs 0.42% (B) — no meaningful difference.</li>
            <li><strong>FE p95 latency:</strong> +8 ms vs baseline (alert threshold +20 ms).</li>
            <li><strong>Spend / DAU:</strong> remained within ±1% band.</li>
            <li><strong>Support tickets:</strong> 12 → 11 per week (no increase).</li>
            <li><strong>Data freshness:</strong> 95th percentile ETL lag 11 minutes (SLO &lt; 15 minutes).</li>
          </ul>
        </div>
        <div>
          <p><strong>Onboarding funnel impact.</strong></p>
          <table class="table">
            <thead>
              <tr>
                <th>Step</th>
                <th>Control (A)</th>
                <th>Test (B)</th>
                <th>Δ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Onboarding started</td>
                <td>100%</td>
                <td>100%</td>
                <td>—</td>
              </tr>
              <tr>
                <td>Interests picked (≥3)</td>
                <td>—</td>
                <td><strong>84%</strong></td>
                <td>+84 pp</td>
              </tr>
              <tr>
                <td>Personalized feed viewed</td>
                <td>—</td>
                <td><strong>92%</strong> of pickers</td>
                <td>—</td>
              </tr>
              <tr>
                <td>First like</td>
                <td>41%</td>
                <td><strong>49%</strong></td>
                <td>+8 pp</td>
              </tr>
              <tr>
                <td>Session 2 within 72h</td>
                <td>33%</td>
                <td><strong>39%</strong></td>
                <td>+6 pp</td>
              </tr>
              <tr>
                <td>R7</td>
                <td>22%</td>
                <td><strong>28%</strong></td>
                <td>+6 pp</td>
              </tr>
            </tbody>
          </table>
          <div class="callout">
            The added interest-selection step did not introduce drop-off; instead it
            improved completion and downstream engagement.
          </div>
        </div>
      </div>
    </section>

    <!-- Segment deep dive -->
    <section class="section">
      <div class="section-header">
        <div class="section-title">Segment Deep Dive</div>
        <div class="section-subtitle">Where the lift came from</div>
      </div>
      <p style="margin-bottom:6px;">
        We saw consistent positive lift across platforms, acquisition channels, and regions, with particularly strong
        impact for organic users in the US where data coverage is strongest.
      </p>
      <table class="table">
        <thead>
          <tr>
            <th>Segment</th>
            <th>Control</th>
            <th>Test</th>
            <th>Lift (pp)</th>
            <th>Insight</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>iOS</td>
            <td>R7 23.1%</td>
            <td>30.3%</td>
            <td><strong>+7.2</strong></td>
            <td>Higher push opt-in rate; interests map well to content supply.</td>
          </tr>
          <tr>
            <td>Android</td>
            <td>R7 21.5%</td>
            <td>26.6%</td>
            <td><strong>+5.1</strong></td>
            <td>Slightly higher personalized feed latency but still within SLOs.</td>
          </tr>
          <tr>
            <td>Organic</td>
            <td>R7 24.0%</td>
            <td>33.8%</td>
            <td><strong>+9.8</strong></td>
            <td>Strongest fit between declared interests and content graph.</td>
          </tr>
          <tr>
            <td>Paid UA</td>
            <td>R7 18.2%</td>
            <td>22.4%</td>
            <td><strong>+4.2</strong></td>
            <td>Lower starting intent but still meaningful uplift.</td>
          </tr>
          <tr>
            <td>US</td>
            <td>R7 22.6%</td>
            <td>29.5%</td>
            <td><strong>+6.9</strong></td>
            <td>Best performance where category catalog and supply are richest.</td>
          </tr>
          <tr>
            <td>Non-US</td>
            <td>R7 21.7%</td>
            <td>27.0%</td>
            <td><strong>+5.3</strong></td>
            <td>Smaller category catalog but still positive across regions.</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Data quality & instrumentation -->
    <section class="section">
      <div class="section-header">
        <div class="section-title">Data Quality & Instrumentation</div>
        <div class="section-subtitle">Ensuring we could trust the read</div>
      </div>
      <div class="cols-2">
        <div>
          <ul>
            <li>Event coverage ≥ 99.2% for core events:
              <span class="inline-code">onboarding_started</span>,
              <span class="inline-code">interests_selected</span>,
              <span class="inline-code">feed_viewed</span>,
              <span class="inline-code">first_like</span>,
              <span class="inline-code">retained_7d</span>.
            </li>
            <li>Late-arriving events &lt; 1.2%, handled using a 24-hour watermark.</li>
            <li>Timezone normalization to UTC; device clock skew mitigated via server timestamps.</li>
            <li>Bot and fraud traffic filtered via rules engine v3.</li>
          </ul>
        </div>
        <div>
          <div class="section-subtitle" style="margin-bottom:4px;">Event schema (excerpt)</div>
          <div class="sql-block">TABLE user_events (
  event_time_utc TIMESTAMP,
  user_id        STRING,
  event_name     STRING,   -- e.g. 'interests_selected'
  properties     JSON,     -- { "count": 3, "ids": ["art","tech","travel"] }
  platform       STRING,   -- 'ios' | 'android' | 'web'
  acquisition    STRING,   -- 'organic' | 'paid'
  experiment_key STRING,   -- 'exp_onb_pick3_v1'
  variant        STRING    -- 'A' | 'B'
);</div>
        </div>
      </div>

      <div class="section-subtitle" style="margin-top:10px;">Analysis SQL (simplified)</div>
      <div class="sql-block">-- Variant-level R7 summary (CUPED-adjusted)
WITH agg AS (
  SELECT variant,
         COUNT(DISTINCT user_id) AS users,
         AVG(CASE WHEN retained_7d THEN 1 ELSE 0 END) AS r7
  FROM experiment_sessions
  WHERE experiment_id = 'exp_onb_pick3_v1'
    AND signup_at BETWEEN '2024-09-29' AND '2024-10-12'
  GROUP BY 1
)
SELECT *,
       (MAX(r7) - MIN(r7)) * 100 AS lift_pp
FROM agg;

-- Segment lift by platform x acquisition
SELECT platform, acquisition,
       AVG(retained_7d) FILTER (WHERE variant='B') -
       AVG(retained_7d) FILTER (WHERE variant='A') AS lift
FROM experiment_sessions
GROUP BY 1,2
ORDER BY 3 DESC;</div>
    </section>

    <!-- Rollout, risk & next steps -->
    <section class="section">
      <div class="section-header">
        <div class="section-title">Rollout, Risk & Next Steps</div>
        <div class="section-subtitle">How we operationalized and what’s next</div>
      </div>
      <div class="cols-2">
        <div>
          <p><strong>Rollout plan.</strong></p>
          <ul>
            <li>Gradual feature-flag rollout: 1% → 10% → 25% → 50% → 100% with live health checks.</li>
            <li>Monitoring via Datadog: FE p95 latency, error rate, crash rate.</li>
            <li>Runbook and rollback: set <span class="inline-code">onb.pick3.enabled=false</span> and revert <span class="inline-code">PR#1284</span> if guardrails breached.</li>
            <li>Comms: release notes to CX, GTM playbook for UA creatives emphasizing “tailored first feed.”</li>
          </ul>

          <p style="margin-top:10px;"><strong>Risks & mitigations.</strong></p>
          <ul>
            <li><strong>Cold-start misclassification</strong> → default safe categories and trending backfill.</li>
            <li><strong>Long-tail content sparsity</strong> → dynamic backfill with popular but adjacent topics.</li>
            <li><strong>Latency on first session</strong> → prefetch top-N per interest prior to first feed paint.</li>
          </ul>
        </div>
        <div>
          <p><strong>Q4 2024 roadmap follow-ups.</strong></p>
          <ol>
            <li><strong>Smart Interest Expansion (ONB-274)</strong> — suggest adjacent topics after day 3 based on behavior.</li>
            <li><strong>Feed Rebalance v2 (FEED-198)</strong> — tune weights for implicit signals and decay older interests.</li>
            <li><strong>Live retention cohorts (DATA-311)</strong> — real-time R7 / R30 dashboards with anomaly alerts.</li>
          </ol>
          <div class="callout" style="margin-top:10px;">
            Outcome: We recommended and executed full rollout of the “Pick 3 interests” onboarding flow as the new
            default for all new users.
          </div>
        </div>
      </div>
    </section>

    <p class="footnote">
      This page is designed to read like a consulting-style case study: clear problem framing, structured solution,
      experiment design, results, and next steps — using realistic artifacts, numbers, and implementation details.
    </p>
  </div>
</body>
</html>
